{% extends "admin/core/base.html" %}
{% load bool_fa %}
{% load static from staticfiles %}
{% load foundation %}

{% block title %}Typesetting Article #{{ article.pk }}{% endblock %}

{% block breadcrumbs %}
    <li>Typesetting {{ assignment.round.article.title|safe }}</li>
{% endblock breadcrumbs %}

{% block body %}
    <div class="row expanded">

        {% if not assignment.completed and not assignment.accepted %}
        <div class="large-12 columns">
            <div class="box">
                <div class="title-area">
                    <h2>Typesetting Assignment</h2>
                </div>
                <div class="content">
                    <p>
                        {{ assignment.manager.full_name }} has requested that you typeset the paper {{ article.title|safe }}. This task is due on {{ assignment.due }}. Below you can accept or decline this task and write a note to the manager.
                    </p>

                    {% include "admin/elements/forms/errors.html" with form=form %}

                    <form method="POST">
                        {% csrf_token %}
                        {{ form.note|foundation }}
                        <button class="success button" name="decision" value="accept">Accept Assignment</button>
                        <button class="alert button" name="decision" value="decline">Decline Assignment</button>
                    </form>

                </div>
            </div>
        </div>
        {% endif %}

        <div class="large-6 columns">
            <div class="box">
                <div class="title-area">
                    <h2>Assignment Information</h2>
                </div>
                <div class="content">
                    {% include "typesetting/elements/typesetter/info.html" %}
                </div>
                <div class="title-area">
                    <h2>Files to Typeset</h2>
                </div>
                <div class="content">
                    <p><small>The following files have been selected for use in generating the typset articles.</small></p>
                    {% include "typesetting/elements/typesetter/files.html" %}
                </div>
                <div class="title-area">
                    <h2>Galley Files</h2>
                </div>
                <div class="content">
                    <p><small>Any galley files associated with this article will be displayed here. Ensure that any image files are uploaded using the upload images function and not as galleys themselves.</small></p>
                    {% include "typesetting/elements/typesetter/galleys.html" %}
                </div>
            </div>
        </div>

        <div class="large-6 columns">
            <div class="box">
                <div class="title-area">
                    <h2>Metadata</h2>
                </div>
                <div class="content">
                    {% include "typesetting/elements/typesetter/metadata.html" %}
                </div>
            </div>
        </div>
    </div>


    {% include "typesetting/elements/new_galley.html" %}
{% endblock body %}


{% block js %}
    <script type="text/javascript" src="{% static 'admin/js/popup.js' %}"></script>
{% endblock %}